function gt_show_login_form(){var s={action:"gt_show_login"};if(""!==window.location.search&&(q_string=window.location.search.substring(1),-1!==q_string.indexOf("redirect_to"))){var e=q_string.replace("#genesis-login","");s.redirect_to=e}jQuery("#wsis-ajax-loader").show(),jQuery.ajax({type:"POST",url:wsis.ajax_url,dataType:"json",data:s,success:function(s){return"undefined"!=typeof s.islogged&&"undefined"!=typeof s.redirect_to&&1==s.islogged&&null!=s.redirect_to?void(window.location=s.redirect_to):void(s.error===!1&&(jQuery("body").append('<div class="uk-modal" id="wsi_login_popup">'+s.data+"</div>"),UIkit.modal("#wsi_login_popup",{center:!0}).show(),jQuery("#wsi_login_popup").on({"hide.uk.modal":function(){window.location=wsis.home_url}})))},error:function(s,e){console.log(s),console.log(e),jQuery("#wsis-ajax-loader").hide()}}).done(function(){jQuery("#wsis-ajax-loader").hide()})}function gt_show_new_pw_form(s){var e={action:"gt_show_newpw_form",q_string:s};jQuery("#wsis-ajax-loader").show(),jQuery.ajax({type:"POST",url:wsis.ajax_url,dataType:"json",data:e,success:function(s){if(s.error===!1){jQuery("body").append('<div class="uk-modal" id="wsi_login_popup" data-uk-observe>'+s.data+"</div>");var e=UIkit.modal("#wsi_login_popup");e.show(),jQuery("#wsi_login_popup").on({"hide.uk.modal":function(){window.location=wsis.home_url}})}else{jQuery("body").append('<div class="uk-modal" id="wsi_login_popup" data-uk-observe><div class="uk-modal-dialog"><button type="button" class="uk-modal-close uk-close"></button><div class="uk-modal-header"><div id="wsis-login-msg" class="clearfix wsis-error show">'+s.error_msg+"</div></div></div>");var e=UIkit.modal("#wsi_login_popup");jQuery("#wsis-login-msg").show(),e.show(),jQuery("#wsi_login_popup").on({"hide.uk.modal":function(){window.location=wsis.home_url}})}},error:function(s,e){jQuery("#wsis-ajax-loader").hide()}}).done(function(){jQuery("#wsis-ajax-loader").hide()})}function wsis_check_pass_strength(){var s,e=jQuery("#first_pass").val(),i=jQuery("#sec_pass").val();if(jQuery("#wsis-password-meter").removeClass("short bad good strong"),!e)return jQuery("#wsis-password-meter").html("Password empty!"),!1;switch(s=wp.passwordStrength.meter(e,wp.passwordStrength.userInputBlacklist(),i)){case 2:jQuery("#wsis-password-meter").addClass("bad").html("Weak");break;case 3:jQuery("#wsis-password-meter").addClass("good").html("Medium");break;case 4:jQuery("#wsis-password-meter").addClass("strong").html("Strong");break;case 5:jQuery("#wsis-password-meter").addClass("short").html("Mismatch");break;default:jQuery("#wsis-password-meter").addClass("short").html("Very weak")}}jQuery(document).ready(function(){"undefined"!=typeof wsis_eal&&1==wsis_eal&&jQuery("body").addClass("wsis_eal"),jQuery("body.wsis_eal").append('<div id="wsis-ajax-loader"></div>');var s=window.location.hash;if(jQuery("body").hasClass("wsis_eal")&&"#genesis-login"===s){var e=!1,i="";""!==window.location.search&&(i=window.location.search.substring(1),-1!==i.indexOf("action=wsisrp")&&(e=!0)),e?gt_show_new_pw_form(i):gt_show_login_form()}jQuery("body.wsis_eal a").each(function(s,e){var i=jQuery(e).attr("href");"#genesis-login"===i&&jQuery(e).click(function(s){s.preventDefault(),gt_show_login_form()})}),jQuery("body.wsis_eal").on("click","#wsis-submit",function(s){s.preventDefault();var e=jQuery("#wsis_loginform").serialize(),i={action:"gt_ajax_login",form_input:e};return jQuery("#wsis-ajax-loader").show(),jQuery.ajax({type:"POST",url:wsis.ajax_url,dataType:"json",data:i,success:function(s){s.error===!1?s.data.login_result===!0?""!=s.data.rdr_uri?window.location.href=s.data.rdr_uri:window.location.href=window.location.protocol+"//"+window.location.hostname+window.location.pathname:(jQuery("#wsis-login-msg").hide(),jQuery("#wsis-login-msg").addClass("wsis-error"),jQuery("#wsis-login-msg").html("<p>"+s.data.msg+"</p>").fadeIn(),s.data.msg.indexOf("Too many failed login attempts.")>=0&&jQuery("#wsis-submit").prop("disabled",!0)):(jQuery("#wsis-login-msg").hide(),jQuery("#wsis-login-msg").addClass("wsis-error"),jQuery("#wsis-login-msg").html("<p>"+s.error_msg+"</p>").fadeIn())},error:function(s,e){jQuery("#wsis-login-msg").hide(),jQuery("#wsis-login-msg").addClass("wsis-error"),jQuery("#wsis-login-msg").html("<p>"+e+"</p>").fadeIn(),jQuery("#wsis-ajax-loader").hide()}}).done(function(){jQuery("#wsis-ajax-loader").hide()}),!1}),jQuery("body.wsis_eal").on("click",".wsis-forget-password",function(s){s.preventDefault();var e={action:"gt_ajax_reset"};jQuery("#wsis-ajax-loader").show(),jQuery.ajax({type:"POST",url:wsis.ajax_url,dataType:"json",data:e,success:function(s){if(s.error===!1)if(jQuery("#wsi_login_popup").length>0)jQuery("#wsi_login_popup").html(s.data);else{jQuery(body).append('<div class="uk-modal" id="wsi_login_popup" data-uk-observe>'+s.data+"</div>");var e=UIkit.modal("#wsi_login_popup");e.show(),jQuery("#wsi_login_popup").on({"hide.uk.modal":function(){window.location=wsis.home_url}})}else jQuery("#wsis-login-msg").hide(),jQuery("#wsis-login-msg").addClass("wsis-error"),jQuery("#wsis-login-msg").html("<p>"+s.error_msg+"</p>").fadeIn()},error:function(s,e){jQuery("#wsis-login-msg").hide(),jQuery("#wsis-login-msg").addClass("wsis-error"),jQuery("#wsis-login-msg").html("<p>"+e+"</p>").fadeIn(),console.log(s),console.log(e),jQuery("#wsis-ajax-loader").hide()}}).done(function(){jQuery("#wsis-ajax-loader").hide()})}),jQuery("body.wsis_eal").on("click","#wsis-reset",function(s){s.preventDefault();var e=jQuery("#wsis_loginform").serialize(),i={action:"gt_reset_password",form_input:e};return jQuery("#wsis-ajax-loader").show(),jQuery.ajax({type:"POST",url:wsis.ajax_url,dataType:"json",data:i,success:function(s){s.error===!1?s.data.reset_result===!0&&(jQuery("#wsis-login-msg").hide(),jQuery("#wsis-login-msg").removeClass("wsis-error"),jQuery("#wsis-login-msg").addClass("wsis-success"),jQuery("#wsis-login-msg").html("<p>"+s.data.msg+"</p>").fadeIn()):(jQuery("#wsis-login-msg").hide(),jQuery("#wsis-login-msg").addClass("wsis-error"),jQuery("#wsis-login-msg").html("<p>"+s.error_msg+"</p>").fadeIn())},error:function(s,e){jQuery("#wsis-login-msg").hide(),jQuery("#wsis-login-msg").addClass("wsis-error"),jQuery("#wsis-login-msg").html("<p>"+e+"</p>").fadeIn(),console.log(s),jQuery("#wsis-ajax-loader").hide()}}).done(function(){jQuery("#wsis-ajax-loader").hide()}),!1}),jQuery("body.wsis_eal").on("click","#wsis-reset-new",function(s){s.preventDefault();var e=jQuery("#wsis_loginform").serialize(),i={action:"gt_set_newpw",form_input:e};return jQuery("#wsis-ajax-loader").show(),jQuery.ajax({type:"POST",url:wsis.ajax_url,dataType:"json",data:i,success:function(s){s.error===!1?(jQuery("#wsis-login-msg").hide(),jQuery("#wsis-login-msg").removeClass("wsis-error"),jQuery("#wsis-login-msg").addClass("wsis-success"),jQuery("#wsis-login-msg").html("<p>"+s.error_msg+"</p>").fadeIn(),setTimeout(function(){window.location=s.data.rdr_uri},3e3)):(jQuery("#wsis-login-msg").hide(),jQuery("#wsis-login-msg").removeClass("wsis-success"),jQuery("#wsis-login-msg").addClass("wsis-error"),jQuery("#wsis-login-msg").html("<p>"+s.error_msg+"</p>").fadeIn())},error:function(s,e){jQuery("#wsis-login-msg").hide(),jQuery("#wsis-login-msg").removeClass("wsis-success"),jQuery("#wsis-login-msg").addClass("wsis-error"),jQuery("#wsis-login-msg").html("<p>"+e+"</p>").fadeIn(),console.log(s),jQuery("#wsis-ajax-loader").hide()}}).done(function(){jQuery("#wsis-ajax-loader").hide()}),!1}),jQuery("body.wsis_eal").on("keyup","#first_pass, #sec_pass",function(){wsis_check_pass_strength()})});